# 15. ä¸‰æ•°ä¹‹å’Œ - LeetCode Python/Java/C++/JS/C#/Go/Ruby é¢˜è§£

> ğŸš€ **æ‰“é€ ä½ çš„å¼€å‘è€…ä¸ªäººIP**
>
> æŒæ¡ç®—æ³•æ˜¯æˆåŠŸçš„åŸºçŸ³ï¼Œè€Œå…¨æ–¹ä½å±•ç¤ºä½ çš„æ‰ååˆ™æ˜¯è·å¾—å‚é’çš„å…³é”®ã€‚
>
> æˆ‘çš„å¦ä¸€ä¸ªé¡¹ç›® [**leader.me**](https://www.leader.me) â€”â€” ä¸“ä¸ºç¨‹åºå‘˜æ‰“é€ çš„â€œå…¨èƒ½å‹â€ä¸ªäººå“ç‰Œå±•ç¤ºå¹³å°ã€‚
>
> **ä¸‰ä½ä¸€ä½“ï¼ˆAll-In-Oneï¼‰çš„èŒåœºåˆ©å™¨ï¼š**
> - ğŸ“„ **ç®€å† + ä½œå“é›† + åšå®¢ï¼š** å°†ä½ çš„ GitHub é¡¹ç›®ã€æŠ€æœ¯å¿ƒå¾—ä¸èŒåœºç»å†å®Œç¾èåˆã€‚
> - ğŸŒ **æ°¸ä¹…å…è´¹è‡ªå®šä¹‰åŸŸåï¼š** æ”¯æŒç»‘å®šä½ è‡ªå·±çš„ç‹¬ç«‹åŸŸåï¼Œä¸”è¯¥åŠŸèƒ½æ°¸ä¹…å…è´¹ã€‚
> - âœ¨ **é¡¶çº§è¡Œä¸šå­åŸŸåï¼š** æä¾› `name.cto.page`ã€`name.engineer.dev` ç­‰æå…·èŒä¸šå«é‡‘é‡çš„ä¸“å±åŸŸåã€‚
> - ğŸ”— **è¶…é…·è¶…çŸ­ä¸ªäººä¸»é¡µï¼š** è·å¾—æå…¶ç®€ç»ƒçš„ç¤¾äº¤åç‰‡ï¼Œå¦‚ `is.bio/yourname` æˆ– `an.dev/yourname`ã€‚
>
> [**ç«‹å³å‰å¾€ leader.me æ‰“é€ ä½ çš„ä¸ªäººå“ç‰Œ â†’**](https://www.leader.me)

---

è®¿é—®åŸæ–‡é“¾æ¥ï¼š[15. ä¸‰æ•°ä¹‹å’Œ - LeetCode Python/Java/C++/JS/C#/Go/Ruby é¢˜è§£](https://leetcode.blog/zh/leetcode/15-3sum)ï¼Œä½“éªŒæ›´ä½³ï¼

åŠ›æ‰£é“¾æ¥ï¼š[15. ä¸‰æ•°ä¹‹å’Œ](https://leetcode.cn/problems/3sum), éš¾åº¦ç­‰çº§ï¼š**ä¸­ç­‰**ã€‚

## LeetCode â€œ15. ä¸‰æ•°ä¹‹å’Œâ€é—®é¢˜æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ `[nums[i], nums[j], nums[k]]` æ»¡è¶³ `i != j`ã€`i != k` ä¸” `j != k` ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ `nums[i] + nums[j] + nums[k] == 0` ã€‚è¯·ä½ è¿”å›æ‰€æœ‰å’Œä¸º `0` ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚

**æ³¨æ„**ï¼šç­”æ¡ˆä¸­**ä¸**å¯ä»¥åŒ…å«**é‡å¤**çš„ä¸‰å…ƒç»„ã€‚


### [ç¤ºä¾‹ 1]

**è¾“å…¥**: `nums = [-1,0,1,2,-1,-4]`

**è¾“å‡º**: `[[-1,-1,2],[-1,0,1]]`

**è§£é‡Š**: 

<p>nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚<br>
nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚<br>
nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚<br>
ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚<br>
æ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚</p>


### [ç¤ºä¾‹ 2]

**è¾“å…¥**: `nums = [0,1,1]`

**è¾“å‡º**: `[]`

**è§£é‡Š**: `å”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚`

### [ç¤ºä¾‹ 3]

**è¾“å…¥**: `nums = [0,0,0]`

**è¾“å‡º**: `[[0,0,0]]`

**è§£é‡Š**: `å”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚`

### [çº¦æŸ]

- `3 <= nums.length <= 3000`
- `-10^5 <= nums[i] <= 10^5`

### [Hints]

<details>
  <summary>æç¤º 1</summary>
  So, we essentially need to find three numbers `x`, `y`, and `z` such that they add up to the given value. If we fix one of the numbers say `x`, we are left with the two-sum problem at hand!

  
</details>

<details>
  <summary>æç¤º 2</summary>
  For the two-sum problem, if we fix one of the numbers, say `x`, we have to scan the entire array to find the next number `y`, which is `value - x` where value is the input parameter. Can we change our array somehow so that this search becomes faster?

  
</details>

<details>
  <summary>æç¤º 3</summary>
  The second train of thought for two-sum is, without changing the array, can we use additional space somehow? Like maybe a hash map to speed up the search?

  
</details>

## æ€è·¯ 1

1. ä¸‰ä¸ªæ•°ç›¸åŠ ç­‰äº0ï¼Œç­‰åŒäº`ä¸¤ä¸ªæ•°ç›¸åŠ çš„å’Œ`ç­‰äº`è´Ÿçš„ç¬¬ä¸‰ä¸ªæ•°`ã€‚
2. æœ‰ä¸¤ç§æ–¹æ¡ˆå¯ä¾›é€‰æ‹©ï¼š
    1. å…ˆå®šä¸‹ä¸€ä¸ªæ•°ï¼Œç„¶åæŸ¥æ‰¾å¦å¤–ä¸¤ä¸ªæ•°ã€‚
    2. å…ˆå®šä¸‹ä¸¤ä¸ªæ•°ï¼Œç„¶åæŸ¥æ‰¾ç¬¬ä¸‰ä¸ªæ•°ã€‚
3. å¦‚æœé€‰æ‹©`æ–¹æ¡ˆ2`ï¼Œéœ€è¦ç”¨åˆ°`Map`ã€‚å› ä¸ºéœ€è¦å¯¹`nums`å»é‡å¤ï¼›åœ¨`Map`ä¸­æŸ¥æ‰¾`ç¬¬ä¸‰ä¸ªæ•°`æ—¶ï¼Œè¿˜éœ€è¦é¿å¼€å·²ç»å®šä¸‹çš„`ä¸¤ä¸ªæ•°`ï¼Œå®ç°èµ·æ¥ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚
4. å¦‚æœé€‰æ‹©`æ–¹æ¡ˆ1`ï¼ŒæŸ¥æ‰¾å¦å¤–ä¸¤ä¸ªæ•°æ—¶ï¼Œéœ€è¦ç”¨åˆ°`åŒæŒ‡é’ˆ`ç®—æ³•ã€‚
5. å¯¹äº`æ–¹æ¡ˆ2`ï¼Œä»…ç»™å‡ºäº†`Python`ç¤ºä¾‹ä»£ç ã€‚ä¸‹æ–‡é‡ç‚¹è®²`æ–¹æ¡ˆ1`ã€‚

## æ­¥éª¤

1. å¯¹`nums`è¿›è¡Œæ’åºã€‚
2. éå†`nums`ã€‚
3. ä¼ªä»£ç ï¼š

    ```javascript
    for (i = 0; i < nums.length; i++) {
       left = i + 1
       right = nums.length - 1

       while (left < right) {
          if (condition1) {
             left += 1
          } else (condition2) {
             right -= 1
          }
       }
    }
    ```

## å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦: `O(N * N)`.
- ç©ºé—´å¤æ‚åº¦: `O(N)`.

## Python

```python
# If you want the program to run faster, uncomment the two places in the code. 
class Solution:
    def threeSum(self, nums: List[int]) -> List[List[int]]:
        nums.sort()
        # nums_2 = []
        # for i, num in enumerate(nums):
        #     if i >= 3 and num == nums[i - 1] == nums[i - 2] == nums[i - 3]:
        #         continue
        #     nums_2.append(num)
        # nums = nums_2
        results = set()

        for i, num in enumerate(nums[:len(nums) - 2]):
            # if num > 0:
            #     break
            left = i + 1
            right = len(nums) - 1

            while left < right:
                sum_ = nums[left] + nums[right]
                if sum_ == -num:
                    results.add((num, nums[left], nums[right]))
                    left += 1
                elif sum_ > -num:
                    right -= 1
                else:
                    left += 1
        
        return list(results)
```

## Ruby

```ruby
# @param {Integer[]} nums
# @return {Integer[][]}
def three_sum(nums)
  nums.sort!
  results = Set.new

  nums_2 = []
  nums.each_with_index do |num, i|
    next if i >= 3 && num == nums[i - 1] && num == nums[i - 2] && num == nums[i - 3]
    nums_2.append(num)
  end

  nums = nums_2

  # Iterate through each number as potential first element
  (0...nums.length - 2).each do |i|
    break if nums[i] > 0

    left = i + 1
    right = nums.length - 1

    # Two-pointer approach for remaining elements
    while left < right
      current_sum = nums[i] + nums[left] + nums[right]
      if current_sum == 0
        # Add sorted triplet to avoid duplicates
        results.add([nums[i], nums[left], nums[right]])
        left += 1
        right -= 1
      elsif current_sum < 0
        left += 1 # Need larger sum
      else
        right -= 1 # Need smaller sum
      end
    end
  end

  results.to_a
end
```

## Go

```go
func threeSum(nums []int) [][]int {
    sort.Ints(nums)

    nums2 := make([]int, 0)
    for i, num := range nums {
        if i >= 3 && num == nums[i-1] && nums[i-1] == nums[i-2] && nums[i-2] == nums[i-3] {
            continue
        }
        nums2 = append(nums2, num)
    }

    nums = nums2
    results := make([][]int, 0)
    seen := make(map[string]bool)

    for i := 0; i < len(nums)-2; i++ {
        // if nums[i] > 0 {
        //     break
        // }

        left := i + 1
        right := len(nums) - 1

        for left < right {
            sum := nums[left] + nums[right]
            if sum == -nums[i] {
                triplet := []int{nums[i], nums[left], nums[right]}
                key := fmt.Sprintf("%d,%d,%d", triplet[0], triplet[1], triplet[2])
                if !seen[key] {
                    results = append(results, triplet)
                    seen[key] = true
                }
                left++
            } else if sum > -nums[i] {
                right--
            } else {
                left++
            }
        }
    }

    return results
}
```

## C++

```cpp
class Solution {
public:
    vector<vector<int>> threeSum(vector<int>& nums) {
        sort(nums.begin(), nums.end());

        // Uncomment to speed up
        // vector<int> nums2;
        // for (int i = 0; i < nums.size(); i++) {
        //     if (i >= 3 && nums[i] == nums[i-1] && nums[i-1] == nums[i-2] &&
        //     nums[i-2] == nums[i-3]) {
        //         continue;
        //     }
        //     nums2.push_back(nums[i]);
        // }
        // nums = nums2;

        vector<vector<int>> results;
        set<vector<int>> seen;

        for (int i = 0; i < nums.size() - 2; i++) {
            // Uncomment to speed up
            // if (nums[i] > 0) {
            //     break;
            // }
            int left = i + 1;
            int right = nums.size() - 1;

            while (left < right) {
                int sum = nums[left] + nums[right];

                if (sum == -nums[i]) {
                    vector<int> triplet = {nums[i], nums[left], nums[right]};

                    if (seen.find(triplet) == seen.end()) {
                        results.push_back(triplet);
                        seen.insert(triplet);
                    }

                    left++;
                } else if (sum > -nums[i]) {
                    right--;
                } else {
                    left++;
                }
            }
        }

        return results;
    }
};
```

## JavaScript

```javascript
/**
 * @param {number[]} nums
 * @return {number[][]}
 */
var threeSum = function(nums) {
    nums.sort((a, b) => a - b);

    // Uncomment to speed up
    // let nums2 = [];
    // for (let i = 0; i < nums.length; i++) {
    //     if (i >= 3 && nums[i] === nums[i-1] && nums[i-1] === nums[i-2] && nums[i-2] === nums[i-3]) {
    //         continue;
    //     }
    //     nums2.push(nums[i]);
    // }
    // nums = nums2;
    
    const results = [];
    const seen = new Set();
    
    for (let i = 0; i < nums.length - 2; i++) {
        // Uncomment to speed up
        // if (nums[i] > 0) {
        //     break;
        // }
        let left = i + 1;
        let right = nums.length - 1;
        
        while (left < right) {
            const sum = nums[left] + nums[right];

            if (sum === -nums[i]) {
                const triplet = [nums[i], nums[left], nums[right]];
                const key = triplet.join(',');
                if (!seen.has(key)) {
                    results.push(triplet);
                    seen.add(key);
                }
                left++;
            } else if (sum > -nums[i]) {
                right--;
            } else {
                left++;
            }
        }
    }
    
    return results;
};
```

## C#

```csharp
public class Solution {
    public IList<IList<int>> ThreeSum(int[] nums) {
        Array.Sort(nums);

        // Uncomment to speed up
        // var nums2 = new List<int>();
        // for (int i = 0; i < nums.Length; i++) {
        //     if (i >= 3 && nums[i] == nums[i-1] && nums[i-1] == nums[i-2] && nums[i-2] == nums[i-3]) {
        //         continue;
        //     }
        //     nums2.Add(nums[i]);
        // }
        // nums = nums2.ToArray();
        
        var results = new List<IList<int>>();
        var seen = new HashSet<string>();
        
        for (int i = 0; i < nums.Length - 2; i++) {
            // Uncomment to speed up
            // if (nums[i] > 0) {
            //     break;
            // }
            int left = i + 1;
            int right = nums.Length - 1;
            
            while (left < right) {
                int sum = nums[left] + nums[right];
                if (sum == -nums[i]) {
                    var triplet = new List<int> { nums[i], nums[left], nums[right] };
                    string key = string.Join(",", triplet);
                    if (!seen.Contains(key)) {
                        results.Add(triplet);
                        seen.Add(key);
                    }
                    left++;
                } else if (sum > -nums[i]) {
                    right--;
                } else {
                    left++;
                }
            }
        }
        
        return results;
    }
}
```

## Java

```java
class Solution {
    public List<List<Integer>> threeSum(int[] nums) {
        Arrays.sort(nums);

        // Uncomment to speed up
        // List<Integer> nums2 = new ArrayList<>();
        // for (int i = 0; i < nums.length; i++) {
        //     if (i >= 3 && nums[i] == nums[i-1] && nums[i-1] == nums[i-2] && nums[i-2] == nums[i-3]) {
        //         continue;
        //     }
        //     nums2.add(nums[i]);
        // }
        // nums = nums2.stream().mapToInt(i -> i).toArray();
        
        List<List<Integer>> results = new ArrayList<>();
        var seen = new HashSet<>();
        
        for (int i = 0; i < nums.length - 2; i++) {
            // Uncomment to speed up
            // if (nums[i] > 0) {
            //     break;
            // }
            int left = i + 1;
            int right = nums.length - 1;
            
            while (left < right) {
                int sum = nums[left] + nums[right];
                if (sum == -nums[i]) {
                    List<Integer> triplet = Arrays.asList(nums[i], nums[left], nums[right]);
                    if (!seen.contains(triplet)) {
                        results.add(triplet);
                        seen.add(triplet);
                    }
                    left++;
                } else if (sum > -nums[i]) {
                    right--;
                } else {
                    left++;
                }
            }
        }
        
        return results;
    }
}
```

## Other languages

```java
// Welcome to create a PR to complete the code of this language, thanks!
```

## æ€è·¯ 2

è¯·å‚è€ƒ`é¢˜è§£1`çš„æ€è·¯ï¼Œæœ¬å¤„ä»…ç»™å‡ºä»£ç ï¼Œç”¨æ¥è§£é‡Šä¸ºä»€ä¹ˆä½¿ç”¨ `Map` ä¸æ˜¯ä¸€ä¸ªå¥½åŠæ³•ã€‚

## å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦: `O(N * N)`.
- ç©ºé—´å¤æ‚åº¦: `O(N)`.

## Python

```python
# from collections import defaultdict

class Solution:
    def threeSum(self, nums: List[int]) -> List[List[int]]:
        nums = duplicate_removed_nums(nums)

        results = set()
        num_to_indices = defaultdict(list)

        for i, num in enumerate(nums):
            num_to_indices[num].append(i)

        for i in range(len(nums) - 1):
            for j in range(i + 1, len(nums)):
                if -(nums[i] + nums[j]) in num_to_indices:
                    for index in num_to_indices[-(nums[i] + nums[j])]:
                        if index not in (i, j):
                            result = [nums[i], nums[j], nums[index]]
                            result.sort()
                            results.add(tuple(result))

        return list(results)


def duplicate_removed_nums(nums):
    num_to_count = defaultdict(int)

    for i, num in enumerate(nums):
        if num_to_count[num] <= 2 or (num_to_count[num] <= 3 and num == 0):
            num_to_count[num] += 1

    new_nums = []

    for num in num_to_count:
        new_nums.extend([num] * num_to_count[num])
    
    return new_nums
```

## Other languages

```java
// Welcome to create a PR to complete the code of this language, thanks!
```

> ğŸš€ **æ‰“é€ ä½ çš„å¼€å‘è€…ä¸ªäººIP**
>
> æŒæ¡ç®—æ³•æ˜¯æˆåŠŸçš„åŸºçŸ³ï¼Œè€Œå…¨æ–¹ä½å±•ç¤ºä½ çš„æ‰ååˆ™æ˜¯è·å¾—å‚é’çš„å…³é”®ã€‚
>
> æˆ‘çš„å¦ä¸€ä¸ªé¡¹ç›® [**leader.me**](https://www.leader.me) â€”â€” ä¸“ä¸ºç¨‹åºå‘˜æ‰“é€ çš„â€œå…¨èƒ½å‹â€ä¸ªäººå“ç‰Œå±•ç¤ºå¹³å°ã€‚
>
> **ä¸‰ä½ä¸€ä½“ï¼ˆAll-In-Oneï¼‰çš„èŒåœºåˆ©å™¨ï¼š**
> - ğŸ“„ **ç®€å† + ä½œå“é›† + åšå®¢ï¼š** å°†ä½ çš„ GitHub é¡¹ç›®ã€æŠ€æœ¯å¿ƒå¾—ä¸èŒåœºç»å†å®Œç¾èåˆã€‚
> - ğŸŒ **æ°¸ä¹…å…è´¹è‡ªå®šä¹‰åŸŸåï¼š** æ”¯æŒç»‘å®šä½ è‡ªå·±çš„ç‹¬ç«‹åŸŸåï¼Œä¸”è¯¥åŠŸèƒ½æ°¸ä¹…å…è´¹ã€‚
> - âœ¨ **é¡¶çº§è¡Œä¸šå­åŸŸåï¼š** æä¾› `name.cto.page`ã€`name.engineer.dev` ç­‰æå…·èŒä¸šå«é‡‘é‡çš„ä¸“å±åŸŸåã€‚
> - ğŸ”— **è¶…é…·è¶…çŸ­ä¸ªäººä¸»é¡µï¼š** è·å¾—æå…¶ç®€ç»ƒçš„ç¤¾äº¤åç‰‡ï¼Œå¦‚ `is.bio/yourname` æˆ– `an.dev/yourname`ã€‚
>
> [**ç«‹å³å‰å¾€ leader.me æ‰“é€ ä½ çš„ä¸ªäººå“ç‰Œ â†’**](https://www.leader.me)

---

è®¿é—®åŸæ–‡é“¾æ¥ï¼š[15. ä¸‰æ•°ä¹‹å’Œ - LeetCode Python/Java/C++/JS/C#/Go/Ruby é¢˜è§£](https://leetcode.blog/zh/leetcode/15-3sum)ï¼Œä½“éªŒæ›´ä½³ï¼

GitHub ä»“åº“: [leetcode-python-java](https://github.com/leetcode-python-java/leetcode-python-java).

